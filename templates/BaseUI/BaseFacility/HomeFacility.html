{% extends 'BaseUI/BaseFacility/baseFacility.html' %}
{% load staticfiles %}
{% load static %}
<!-------------- BLOCK MENU ---------------->
{% block listfaci %}{% url 'facilitiesDisplay' siteID %}{% endblock %}
{% block newfaci %}{% url 'facilitiesNew' siteID %}{% endblock %}
{% block design %}{% url 'designcodeDisplay' siteID %}{% endblock %}
{% block manu %}{% url 'manufactureDisplay' siteID %}{% endblock %}
{% block uploadInsp %}{% url 'upload' siteID %}{% endblock %}
{% block uploadPlant %}{% url 'uploadPlan' siteID %}{% endblock %}
{% block manageFile %}{% url 'manageFile' siteID %}{% endblock %}
{#{% block uploadScada %}{% url 'uploadScada' siteID %}{% endblock %}#}
{% block inspecPlan %}{% url 'inspectionPlan' siteID %}{% endblock %}
{% block rbitracking %}{% url 'rbitracking' %}{% endblock %}
{% block mitigationSite %}{% url 'mitigationSite' siteID%}{% endblock %}
{% block HelpSite %}{% url 'help' %}{% endblock %}
{% block forum %}{% url 'forum' %}{% endblock %}
{% block testSample %}{% url 'testsample' siteID%}{% endblock %}
{% block settingAccount %}{% url 'settingAccount' siteID %}{% endblock %}
{% block settingNotification %}{% url 'settingNotification' siteID %}{% endblock %}
{% block Re-verificationSite %}{% url 'Re-verificationSite' siteID %}{% endblock %}
{% block homedetail %}{% url 'homefacility' siteID%}{% endblock %}
<!----------------- END BLOCK----------------->

{% block library %}
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->

{% endblock %}
{% block data-content %}
<head>

</head>
<style>
#map {
    height: 100%;
}
  html,
  body {
    height: 100%;
    margin: 0;
    padding: 0;
}
fieldset {
  background-color: White;
}

legend {
  background-color: gray;
  color: white;
  padding: 5px 10px;
}
.riskmatrix {
    width: 530px;
    height: 580px;
    background: #fff;
    float:left;
}
.showtable{
    width: 600px;
    float: right;
}
div.a {
  white-space: nowrap;
  /* width: 90px;
  overflow: hidden;
  text-overflow: ellipsis; */
}
#searchs{
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
  font-size: 13px;
}
.city{
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
  font-size: 13px;
}
#search3{
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
  font-size: 13px;
}
#proposal
{
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
  font-size: 13px;
}
#search2{
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
  font-size: 13px;
}
#searchs td,#searchs th {
  border: 1px solid #ddd;
  padding: 0px;
  text-align: center;
}
.city td, .city th{
  border-top: 1px solid #ddd;
  /* border-bottom: 1px solid #ddd; */
  padding: 5px;
  text-align: center;
}
#search2 th,#search2 td{
  border: 1px solid #ddd;
  padding: 0px;
  text-align: center;
}
#search3 th,#search3 td{
  border: 1px solid #ddd;
  padding: 0px;
  text-align: center;
}
#proposal th,#proposal td{
  border: 1px solid #ddd;
  padding: 0px;
  text-align: center;
}
#searchs tr:nth-child(even){background-color: #f2f2f2;}
.city tr:nth-child(even){background-color: white;}
#search2 tr:nth-child(even){background-color: #f2f2f2;}
#search3 tr:nth-child(even){background-color: #f2f2f2;}
#proposal tr:nth-child(even){background-color: #f2f2f2;}
#searchs tr:hover {background-color: #f2f2f2;}
.city tr:hover {background-color: #f2f2f2;}
#search2 tr:hover {background-color: #f2f2f2;}
#search3 tr:hover {background-color: #f2f2f2;}
#proposal tr:hover {background-color: #f2f2f2;}

#searchs th {
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: #305680;
  color: white;
}
.city th {
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: #1c67b2;
  color: #fff;
  font-size: 13px;
}
#search2 th{
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: #305680;
  color: white;
}
#search3 th{
  padding-top: 10px;
  padding-bottom: 10px;
  background-color :#305680;
  color: white;
}
#proposal th{
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: #305680;
  color: white;
}


</style>


<form id="function" method="post">
    {% csrf_token %}
    <div class="title-verifitcation" >
    <h1>Welcome {{ username }},</h1>
    <h1>YOUR FACILITIES DASHBOARD</h1>

    </div>
    <div class="contain-custom">
        <div class="row">
            <div class="col-md-3">
                <div class="item-custom column-hight">
                    <img class="ml-16" src="{% static 'image/Sensor/sites.png'%}" alt="">
                    <div class="mr-16">
                        <div class="f-36">{{ num_site }}</div>
                        <div class="f-18">Sites</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="item-custom column-medium">
                    <img class="ml-16" src="{% static 'image/Sensor/factory.png'%}" alt="">
                    <div class="mr-16">
                        <div class="f-36">{{ num_faci }}</div>
                        <div class="f-18">Facility</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="item-custom column-low">
                    <img class="ml-16" src="{% static 'image/Sensor/equipment.png'%}" alt="">
                    <div class="mr-16">
                        <div class="f-36">{{ num_eq }}</div>
                        <div class="f-18">Equipment</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="item-custom column-normal">
                    <img class="ml-16" src="{% static 'image/Sensor/engineering.png'%}" alt="">
                    <div class="mr-16">
                        <div class="f-36">{{ num_com }}</div>
                        <div class="f-18">Component</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <!--<div class="title-verifitcation" >-->
      <!--<h3 style="text-align:center; color:white;">You can view all the location and some of the factory's facilities via the map and table below </h3>-->
    <!--</div>-->
    <!--<div>-->
        <!--<div id="map"></div>-->
    <!--<script-->
      <!--src="https://maps.googleapis.com/maps/api/js?key=AIzaSyArdfCtACBaNeNEuj08rfjn1Xqguon2kck&callback=initMap&libraries=&v=weekly"-->
      <!--async></script>-->
        <!--<script>-->
      <!--let map;-->

        <!--function initMap() {-->
          <!--map = new google.maps.Map(document.getElementById("map"), {-->
            <!--zoom: 6,-->
            <!--center: new google.maps.LatLng(18.6733, 105.6922),-->
            <!--mapTypeId: "terrain",-->
          <!--});-->
          <!--// Create a <script> tag and set the USGS URL as the source.-->
          <!--const script = document.createElement("script");-->
          <!--// This example uses a local copy of the GeoJSON stored at-->
          <!--// http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojsonp-->
          <!--script.src ="{% static 'json/vietnamprovince/facility.js' %}";-->
          <!--console.log(script)-->
          <!--document.getElementsByTagName("head")[0].appendChild(script);-->
        <!--}-->
        <!---->
        <!--// Loop through the results array and place a marker for each-->
        <!--// set of coordinates.-->
        <!--const eqfeed_callback = function (results) {-->
          <!--const infoWindow = new google.maps.InfoWindow;-->
          <!--for (let i = 0; i < results.features.length; i++) {-->
            <!--const coords = results.features[i].geometry.coordinates;-->
            <!--const latLng = new google.maps.LatLng(coords[1], coords[0]);-->
            <!--const marker = new google.maps.Marker({-->
              <!--position: latLng,-->
              <!--map: map,-->
              <!--title: results.features[i].properties.name,-->
              <!--content: '<div id="content">' +-->
              <!--'<div id="siteNotice">' +-->
              <!--"</div>" +-->
              <!--'<h1 id="firstHeading" class="firstHeading">'+results.features[i].properties.name+' Facility</h1>' +-->
              <!--'<div id="bodyContent">' +-->
              <!--"<p><b>Facility</b>, which include <b>"+results.features[i].properties.equip+" equipment</b> and <b>"+results.features[i].properties.comp+" component</b>,is a large " +-->
              <!--"Faciltiy.</p>" +-->
              <!--'<p>Link to list equipments: <a href="'+results.features[i].properties.url+'" target="_blank">' +-->
              <!--results.features[i].properties.url +"</a>"+-->
              <!--"</div>",-->
            <!--});-->
            <!--marker.addListener("click", () => {-->
                <!--infoWindow.close();-->
                <!--infoWindow.setContent(marker.content);-->
                <!--infoWindow.open(marker.getMap(), marker);-->
              <!--});-->
          <!--}-->
        <!--};-->
    <!--</script>-->
    <!--</div>-->

<div>
        <ul class="nav nav-pills" style="margin-bottom: 20px;">
            <li class="btn btn-primary active" style="border-radius: 10px 0 0 0; height: 42px; font-size: 20px;" data-toggle="pill" href="#menu0" type="button">
                Process Plan
              </li>
              <li style="border-radius: 0 10px 0 0; height: 42px;font-size: 20px;margin: 0; padding: 6px 45px;" data-toggle="pill" href="#menu1" type="button" class="btn btn-primary">
                Tank
              </li>
        </ul>

        <div class="tab-content vertical-chart" style="padding-bottom: 20px;">
            <!---------------- Process Plant------------------>
            <div id="menu0" class="tab-pane fade in active" >
                <div class="riskmatrix">
                    <canvas id="myCanvas" width="550" height="550"></canvas>
                    <script>
                        //Lấy đối tượng Canvas
                        var canvas = document.getElementById('myCanvas');
                        // Chọn đối tượng vẽ 2D
                        var ctx = canvas.getContext('2d');
                        var i = 100;
                        // Tiến hành vẽ
                        ctx.strokeStyle = 'black';
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(0+i, 80, 80, 80);
                        ctx.strokeRect(0+i, 80, 80, 80);
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(80+i ,80,80,80);
                        ctx.strokeRect(80+i,80,80,80)
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(160+i,80,80,80);
                        ctx.strokeRect(160+i,80,80,80)
                        ctx.fillStyle = 'red';
                        ctx.fillRect(240+i,80,80,80);
                        ctx.strokeRect(240+i,80,80,80)
                        ctx.fillStyle = 'red';
                        ctx.fillRect(320+i,80,80,80);
                        ctx.strokeRect(320+i,80,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(0+i,160,80,80);
                        ctx.strokeRect(0+i,160,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(80+i,160,80,80);
                        ctx.strokeRect(80+i,160,80,80)
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(160+i,160,80,80);
                        ctx.strokeRect(160+i,160,80,80);
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(240+i,160,80,80);
                        ctx.strokeRect(240+i,160,80,80)
                        ctx.fillStyle = 'red';
                        ctx.fillRect(320+i,160,80,80);
                        ctx.strokeRect(320+i,160,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(0+i,240,80,80);
                        ctx.strokeRect(0+i,240,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(80+i,240,80,80);
                        ctx.strokeRect(80+i,160,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(160+i,240,80,80);
                        ctx.strokeRect(160+i,240,80,80)
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(240+i,240,80,80);
                        ctx.strokeRect(240+i,240,80,80)
                        ctx.fillStyle = 'red';
                        ctx.fillRect(320+i,240,80,80);
                        ctx.strokeRect(320+i,240,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(0+i,320,80,80);
                        ctx.strokeRect(0+i,320,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(80+i,320,80,80);
                        ctx.strokeRect(80+i,320,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(160+i,320,80,80);
                        ctx.strokeRect(160+i,320,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(240+i,320,80,80);
                        ctx.strokeRect(240+i,320,80,80);
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(320+i,320,80,80);
                        ctx.strokeRect(320+i,320,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(0+i,400,80,80);
                        ctx.strokeRect(0+i,400,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(80+i,400,80,80);
                        ctx.strokeRect(80+i,400,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(160+i,400,80,80);
                        ctx.strokeRect(160+i,400,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(240+i,400,80,80);
                        ctx.strokeRect(240+i,400,80,80)
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(320+i,400,80,80);
                        ctx.strokeRect(320+i,400,80,80);
                        {% for a in APINormal %}
                            ctx.beginPath();
                            ctx.fillStyle="Blue";
                            ctx.fillRect({{ a.API2.x }}-15,{{ a.API2.y }}-15,30,30);

                            ctx.beginPath();
                            ctx.arc({{ a.API1.x }},{{ a.API1.y }},15,0,2 * Math.PI, true);
                            ctx.fillStyle="LightGray";
                            ctx.fill();

                            ctx.beginPath();
                            ctx.fillStyle="Purple";
                            ctx.fillRect({{ a.API3.x }}-15,{{ a.API3.y }}-10,30,20);
                        {% endfor %}

                        ctx.beginPath();
                        ctx.arc(120,35,15,0,2 * Math.PI, true);
                        ctx.fillStyle="LightGray";
                        ctx.fill();
                        ctx.beginPath();
                        ctx.fillStyle="Blue";
                        ctx.fillRect(250,20,30,30);
                        ctx.font = "15px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText(": API1", 150, 45);
                        ctx.fillText(": API2", 300, 45);

                        ctx.beginPath();
                        ctx.fillStyle="Purple";
                        ctx.fillRect(400,30,30,20);
                        ctx.font = "15px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText(": API3", 450, 45);

                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("A", 30+i, 520);

                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("B", 110+i, 520);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("C", 190+i, 520);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("D", 270+i, 520);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("E", 350+i, 520);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("1", 60, 445);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("2", 60, 365);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("3", 60, 285);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("4", 60, 205);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("5", 60, 125);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("Consequense", 245, 545);

                        ctx.font = '20px Georgia';
                        ctx.save();
                        ctx.translate(35,330);
                        ctx.rotate(-0.5*Math.PI);

                        var rText = 'Probability';
                        ctx.fillText(rText , 0, 0);
                        ctx.restore();

                        var rWidth = ctx.measureText(rText).width;
                    </script>
                </div>
                <div class="city" style="font-size: 13px;margin-left: 10px; color: #444444;background-color:white" class="showtable">
                    <div>
                        <div class="table-responsive" style="height: 550px;">
                        <table width=100% class="testing">
                            <thead>
                            <tr>
                                <!------- Proposal-------->
                                <th>Site</th>
                                <th>Facility</th>
                                <th >Equipment Number</th>
                                <th>Conponent Number</th>
                                <th>AP1</th>
                                <th>AP2</th>
                                <th>AP3</th>
                                <th >RLI9(months)</th>
                                <th>Assessment Name</th>
                                <th>Assessment Date</th>
                                <th>Commission Date</th>
                                <th style="overflow: auto; white-space: nowrap;">Risk Analysis<br> Period</th>
                                <th>Equipment Type</th>
                                <th >Component Type</th>
                                <th style="overflow: auto;white-space: nowrap;">Inspection Due<br>Date</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for a in APINormal %}
                                <tr>
                                    <td><div class="a">{{a.Site}}</div></td>
                                    <td><div class="a">{{a.Facility}}</div></td>
                                    <td><div class="a">{{a.EquipmentNumber}}</div></td>
                                    <td><div class="a">{{a.ComponentNumber}}</div></td>
                                    <td><div class="a">{{a.POFAPI1}}</div></td>
                                    <td><div class="a">{{a.POFAPI2}}</div></td>
                                    <td><div class="a">{{a.POFAPI3}}</div></td>
                                    <td><div class="a">{{a.RLI}}</div></td>
                                    <td><div class="a">{{a.AssessmentName}}</div></td>
                                    <td><div class="a">{{a.AssessmentDate}}</div></td>
                                    <td><div class="a">{{a.CommissionDate}}</div></td>
                                    <td><div class="a">{{a.RiskAnalysisPeriod}}</div></td>
                                    <td><div class="a">{{a.EquipmentType}}</div></td>
                                    <td><div class="a">{{a.ComponentType}}</div></td>
                                    <td><div class="a">{{a.InspectionDueDate}}</div></td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                        </div>
                        <script>
                            $("input[id='checkbox']").change(function (e) {
                            var isChecked = $(this).prop("checked");
                            if (isChecked == false) {
                                $("#detail").attr("disabled", true);
                            }
                            else {
                                $("#detail").attr("disabled", false);
                                }
                            });
                        </script>
                    </div>
                </div>
            </div>
            <!---------------- Tank------------------>
            <div id="menu1" class="tab-pane fade">
            <!--<div class="city" style="font-size: 15px; color: #444444;">-->
                <div  class="riskmatrix">
                    <canvas id="myCanvas1" width="550" height="550"></canvas>
                    <script>
                        //Lấy đối tượng Canvas
                        var canvas = document.getElementById('myCanvas1');
                        // Chọn đối tượng vẽ 2D
                        var ctx = canvas.getContext('2d');
                        var i = 100;
                        // Tiến hành vẽ
                        ctx.strokeStyle = 'black';
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(0+i, 80, 80, 80);
                        ctx.strokeRect(0+i, 80, 80, 80);
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(80+i ,80,80,80);
                        ctx.strokeRect(80+i,80,80,80)
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(160+i,80,80,80);
                        ctx.strokeRect(160+i,80,80,80)
                        ctx.fillStyle = 'red';
                        ctx.fillRect(240+i,80,80,80);
                        ctx.strokeRect(240+i,80,80,80)
                        ctx.fillStyle = 'red';
                        ctx.fillRect(320+i,80,80,80);
                        ctx.strokeRect(320+i,80,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(0+i,160,80,80);
                        ctx.strokeRect(0+i,160,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(80+i,160,80,80);
                        ctx.strokeRect(80+i,160,80,80)
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(160+i,160,80,80);
                        ctx.strokeRect(160+i,160,80,80);
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(240+i,160,80,80);
                        ctx.strokeRect(240+i,160,80,80)
                        ctx.fillStyle = 'red';
                        ctx.fillRect(320+i,160,80,80);
                        ctx.strokeRect(320+i,160,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(0+i,240,80,80);
                        ctx.strokeRect(0+i,240,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(80+i,240,80,80);
                        ctx.strokeRect(80+i,160,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(160+i,240,80,80);
                        ctx.strokeRect(160+i,240,80,80)
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(240+i,240,80,80);
                        ctx.strokeRect(240+i,240,80,80)
                        ctx.fillStyle = 'red';
                        ctx.fillRect(320+i,240,80,80);
                        ctx.strokeRect(320+i,240,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(0+i,320,80,80);
                        ctx.strokeRect(0+i,320,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(80+i,320,80,80);
                        ctx.strokeRect(80+i,320,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(160+i,320,80,80);
                        ctx.strokeRect(160+i,320,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(240+i,320,80,80);
                        ctx.strokeRect(240+i,320,80,80);
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(320+i,320,80,80);
                        ctx.strokeRect(320+i,320,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(0+i,400,80,80);
                        ctx.strokeRect(0+i,400,80,80)
                        ctx.fillStyle = 'green';
                        ctx.fillRect(80+i,400,80,80);
                        ctx.strokeRect(80+i,400,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(160+i,400,80,80);
                        ctx.strokeRect(160+i,400,80,80)
                        ctx.fillStyle = 'yellow';
                        ctx.fillRect(240+i,400,80,80);
                        ctx.strokeRect(240+i,400,80,80)
                        ctx.fillStyle = 'orange';
                        ctx.fillRect(320+i,400,80,80);
                        ctx.strokeRect(320+i,400,80,80);
                        {% for a in APITank %}
                            ctx.beginPath();
                            ctx.fillStyle="Blue";
                            ctx.fillRect({{ a.API2.x }}-15,{{ a.API2.y }}-15,30,30);

                            ctx.beginPath();
                            ctx.arc({{ a.API1.x }},{{ a.API1.y }},15,0,2 * Math.PI, true);
                            ctx.fillStyle="LightGray";
                            ctx.fill();

                            ctx.beginPath();
                            ctx.fillStyle="Purple";
                            ctx.fillRect({{ a.API3.x }}-15,{{ a.API3.y }}-10,30,20);
                        {% endfor %}

                        ctx.beginPath();
                        ctx.arc(120,35,15,0,2 * Math.PI, true);
                        ctx.fillStyle="LightGray";
                        ctx.fill();
                        ctx.beginPath();
                        ctx.fillStyle="Blue";
                        ctx.fillRect(250,20,30,30);
                        ctx.font = "15px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText(": API1", 150, 45);
                        ctx.fillText(": API2", 300, 45);

                        ctx.beginPath();
                        ctx.fillStyle="Purple";
                        ctx.fillRect(400,30,30,20);
                        ctx.font = "15px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText(": API3", 450, 45);

                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("A", 30+i, 520);

                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("B", 110+i, 520);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("C", 190+i, 520);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("D", 270+i, 520);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("E", 350+i, 520);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("1", 60, 445);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("2", 60, 365);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("3", 60, 285);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("4", 60, 205);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("5", 60, 125);
                        ctx.font = "20px Georgia";
                        ctx.fillStyle = "Black";
                        ctx.fillText("Consequense", 250, 550);

                        ctx.font = '20px Georgia';
                        ctx.save();
                        ctx.translate(35,330);
                        ctx.rotate(-0.5*Math.PI);

                        var rText = 'Probability';
                        ctx.fillText(rText , 0, 0);
                        ctx.restore();

                        var rWidth = ctx.measureText(rText).width;
                    </script>
                    </div>
                    <div class="city" style="font-size: 13px;margin-left: 10px; color: #444444;background-color:white" class="showtable">
                        <div>
                            <div class="table-responsive" style="height: 550px;">
                            <table width=100% class="testing">
                                <thead>
                                <tr>
                                    <!------- Proposal-------->
                                    <th>Site</th>
                                    <th>Facility</th>
                                    <th >Equipment Number</th>
                                    <th>Conponent Number</th>
                                    <th>AP1</th>
                                    <th>AP2</th>
                                    <th>AP3</th>
                                    <th >RLI9(months)</th>
                                    <th>Assessment Name</th>
                                    <th>Assessment Date</th>
                                    <th>Commission Date</th>
                                    <th style="overflow: auto; white-space: nowrap;">Risk Analysis<br> Period</th>
                                    <th>Equipment Type</th>
                                    <th >Component Type</th>
                                    <th style="overflow: auto;white-space: nowrap;">Inspection Due<br>Date</th>
                                    <!--<th>Design Code</th>-->
                                </tr>
                                </thead>
                                <tbody>
                                {% for a in APITank %}
                                    <tr>
                                        <td><div class="a">{{a.Site}}</div></td>
                                        <td><div class="a">{{a.Facility}}</div></td>
                                        <td><div class="a">{{a.EquipmentNumber}}</div></td>
                                        <td><div class="a">{{a.ComponentNumber}}</div></td>
                                        <td><div class="a">{{a.POFAPI1}}</div></td>
                                        <td><div class="a">{{a.POFAPI2}}</div></td>
                                        <td><div class="a">{{a.POFAPI3}}</div></td>
                                        <td><div class="a">{{a.RLI}}</div></td>
                                        <td><div class="a">{{a.AssessmentName}}</div></td>
                                        <td><div class="a">{{a.AssessmentDate}}</div></td>
                                        <td><div class="a">{{a.CommissionDate}}</div></td>
                                        <td><div class="a">{{a.RiskAnalysisPeriod}}</div></td>
                                        <td><div class="a">{{a.EquipmentType}}</div></td>
                                        <td><div class="a">{{a.ComponentType}}</div></td>
                                        <td><div class="a">{{a.InspectionDueDate}}</div></td>
                                        <!--<td><div>{{a.DesignCode}}</div></td>-->
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                            </div>
                            <script>
                            $("input[id='checkboxT']").change(function (e) {
                            var isChecked = $(this).prop("checked");
                            if (isChecked == false) {
                                $("#detailT").attr("disabled", true);
                            }
                            else {
                                $("#detailT").attr("disabled", false);
                                }
                            });
                            </script>

                        </div>
                    </div>

                </div>
            </div>
        <!--</div>-->
        </div>
        </div>
    </div>
</form>
</form>
{% endblock %}